<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ITパス 練習｜シンプルクール × 反復最速</title>
<style>
  :root{
    --bg:#0f1115; --card:#171a21; --muted:#8b93a7; --text:#e7ebf2;
    --accent:#7bc3ff; --ok:#20d06b; --ng:#ff4d4f; --ring:#2a3040;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font:16px/1.6 system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Sans", "Noto Sans JP", "Yu Gothic", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
  }
  .wrap{max-width:900px; margin:32px auto; padding:0 16px}
  .title{font-weight:800; font-size:22px; letter-spacing:.02em}
  .panel{
    background:linear-gradient(180deg, #171a21, #131722);
    border:1px solid #1f2430; border-radius:18px; padding:20px 20px;
    box-shadow:0 10px 30px rgba(0,0,0,.35);
  }
  .grid{display:grid; gap:16px}
  .row{display:flex; gap:14px; align-items:center; flex-wrap:wrap}
  .tag{padding:2px 10px; border:1px solid var(--ring); border-radius:999px; color:var(--muted)}
  .btn{
    background:#1b2030; color:#dfe7ff; border:1px solid #2a3040;
    padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700;
  }
  .btn:focus{outline:none; box-shadow:0 0 0 3px rgba(123,195,255,.25)}
  .btn.primary{background:#1d2b40; border-color:#2f3f59}
  .label{color:var(--muted); font-size:14px}
  /* ---------- quiz ---------- */
  .stats{display:flex; gap:12px; align-items:center}
  .dot{width:10px; height:10px; border-radius:50%}
  .dot.ok{background:var(--ok)} .dot.ng{background:var(--ng)}
  .timer{font-variant-numeric:tabular-nums; font-weight:800; letter-spacing:.03em}
  .card{
    background:var(--card); border:1px solid #202532; border-radius:18px; padding:18px;
  }
  .qtext{font-size:18px; font-weight:700}
  .choices{display:grid; gap:12px; margin-top:14px}
  .choice{
    background:#121722; border:1px solid #2a3040; border-radius:14px; padding:16px;
    cursor:pointer; transition:transform .04s ease, border-color .12s ease, background .12s ease;
  }
  .choice:hover{transform:translateY(-1px); border-color:#3a4661}
  .choice.correct{border-color:var(--ok); background:rgba(32,208,107,.08)}
  .choice.wrong{border-color:var(--ng); background:rgba(255,77,79,.08)}
  .muted{color:var(--muted)}
  .foot{display:flex; justify-content:space-between; align-items:center; color:var(--muted)}
  .kbd{padding:2px 6px; border:1px solid #39425a; border-radius:6px; font-variant-numeric:tabular-nums}
  .hidden{display:none}
</style>
</head>
<body>
<div class="wrap">
  <!-- ======= Top (設定) ======= -->
  <section id="setup" class="panel grid">
    <div class="title">シンプルクール × 反復最速</div>
    <div class="label">過去問を「選ぶ→即判定→自動次問」。手を止めない学習体験。</div>

    <div class="row" style="margin-top:10px">
      <div class="label">出題数：<span id="totalQ" class="tag">0 問</span>
        <span class="label" style="margin-left:8px">（順番は 1→100。データ順そのまま出題）</span>
      </div>
    </div>
    <div class="row">
      <div class="label">制限時間：
        <select id="limitMin" class="btn">
          <option value="10">10</option>
          <option value="20" selected>20</option>
          <option value="30">30</option>
          <option value="45">45</option>
          <option value="60">60</option>
        </select> 分
      </div>
      <button id="startBtn" class="btn primary">開始する</button>
    </div>

    <div class="label" style="margin-top:6px">ショートカット：<span class="kbd">1–4</span> 選択 / <span class="kbd">Enter</span> 次へ（自動進行）</div>
  </section>

  <!-- ======= Quiz ======= -->
  <section id="quiz" class="panel grid hidden" aria-live="polite">
    <div class="row" style="justify-content:space-between">
      <div class="stats">
        <span class="dot ok"></span><span id="cntOk" class="tag">0</span>
        <span class="dot ng" style="margin-left:8px"></span><span id="cntNg" class="tag">0</span>
      </div>
      <div class="timer" id="timer">00:00</div>
    </div>

    <div id="qCard" class="card">
      <div id="qNum" class="muted"></div>
      <div id="qText" class="qtext"></div>
      <div id="choices" class="choices"></div>
    </div>

    <div class="foot">
      <div id="comment" class="muted"></div>
      <div class="muted">残り <span id="remain" class="kbd">0</span> 問</div>
    </div>
  </section>
</div>

<!-- ▼▼▼ ここに “元データ：配列だけ” を貼ります ▼▼▼
     - 先頭 [ で始まり、末尾 ] で終わる JSON 配列だけにしてください
     - 末尾カンマ禁止・コメント不可（書くならこのタグの外に） -->
<script id="raw-data" type="application/json">[
  {
    "number": 1,
    "question": "ダミー問題：要件定義とはどれか。",
    "choices": ["基本設計","詳細設計","要件定義","運用・保守"],
    "answer_index": 2,
    "comment": "利用者の要求を分析し、機能や制約を明確化する工程。"
  }
]</script>
<!-- ▲▲▲ ここをあなたの 1〜100問の配列に置き換えます ▲▲▲ -->

<script>
(function(){
  "use strict";

  // ---- 1) 生データ読み込み（配列必須） ----
  const rawTag = document.getElementById("raw-data");
  let ITEMS = [];
  try {
    const text = (rawTag?.textContent || "").trim();
    if (text) ITEMS = JSON.parse(text);
  } catch(e){ console.error(e); }

  const $ = (s)=>document.querySelector(s);
  const setup = $("#setup");
  const quiz = $("#quiz");
  const elTotal = $("#totalQ");
  const elTimer = $("#timer");
  const elOk = $("#cntOk");
  const elNg = $("#cntNg");
  const elQNum = $("#qNum");
  const elQText = $("#qText");
  const elChoices = $("#choices");
  const elRemain = $("#remain");
  const elComment = $("#comment");

  // 出題数表示 or 警告
  if(!Array.isArray(ITEMS) || ITEMS.length===0){
    elTotal.textContent = "0 問";
    setTimeout(()=>alert('問題データがありません。<script id="raw-data"> に配列を貼ってください。'), 100);
  }else{
    // 1→100 順
    ITEMS.sort((a,b)=> (a.number||0) - (b.number||0));
    elTotal.textContent = `${ITEMS.length} 問`;
  }

  // ---- 2) 状態 ----
  let idx = 0, ok=0, ng=0, timerId=null, remain=ITEMS.length, endAt=0, locked=false;

  function start(){
    if(ITEMS.length===0) return;
    // タイマー
    const mins = parseInt($("#limitMin").value,10)||20;
    endAt = Date.now() + mins*60*1000;
    tick(); timerId = setInterval(tick, 250);
    // 画面遷移
    setup.classList.add("hidden");
    quiz.classList.remove("hidden");
    // 1問目
    idx = 0; ok=0; ng=0; remain = ITEMS.length;
    render();
  }

  function tick(){
    const ms = Math.max(0, endAt - Date.now());
    const s = Math.floor(ms/1000);
    const mm = String(Math.floor(s/60)).padStart(2,"0");
    const ss = String(s%60).padStart(2,"0");
    elTimer.textContent = `${mm}:${ss}`;
    if(ms<=0){ finish(); }
  }

  function finish(){
    clearInterval(timerId); timerId=null;
    locked = true;
    elComment.textContent = `終了：${ok} 正解 / ${ng} 不正解`;
    elComment.classList.remove("muted");
  }

  function render(){
    if(idx>=ITEMS.length){ finish(); return; }
    locked=false; elComment.textContent=""; elComment.classList.add("muted");
    const q = ITEMS[idx];
    elQNum.textContent = `Q ${idx+1} / ${ITEMS.length}（元番号: ${q.number ?? "?"}）`;
    elQText.textContent = (q.question||"").trim();

    elChoices.innerHTML = "";
    (q.choices||[]).forEach((txt, i)=>{
      const div = document.createElement("div");
      div.className = "choice";
      div.dataset.idx = i;
      div.innerHTML = `<div>${txt}</div><div class="muted" style="margin-top:6px">ショートカット：<span class="kbd">${i+1}</span></div>`;
      div.addEventListener("click", ()=> choose(i));
      elChoices.appendChild(div);
    });

    elOk.textContent = ok; elNg.textContent = ng;
    remain = ITEMS.length - idx;
    elRemain.textContent = remain;
  }

  function choose(i){
    if(locked) return;
    locked = true;

    const q = ITEMS[idx];
    const correct = (i === q.answer_index);
    const nodes = [...elChoices.children];
    nodes.forEach((n, ni)=>{
      n.classList.add(ni===q.answer_index? "correct":"wrong");
      n.style.cursor="default";
    });

    if(correct){ ok++; elComment.textContent = "正解"; }
    else { ng++; elComment.textContent = `不正解`; }
    if(q.comment){ elComment.textContent += `：${q.comment}`; }
    elComment.classList.remove("muted");
    elOk.textContent = ok; elNg.textContent = ng;

    // 次の問題へ（高速遷移）
    setTimeout(()=>{ idx++; render(); }, 380);
  }

  // ---- 3) イベント ----
  $("#startBtn").addEventListener("click", start);
  window.addEventListener("keydown",(e)=>{
    if(setup.classList.contains("hidden")){
      if(e.key>='1' && e.key<='4'){
        const n = parseInt(e.key,10)-1;
        if(elChoices.children[n]) choose(n);
      }else if(e.key==='Enter' && locked){ idx++; render(); }
    }
  });
})();
</script>
</body>
</html>
